jQuery(function(a){"use strict";function e(a,e,t,o,r){a.hasOwnProperty("name")&&!a.name&&e.addClass("error"),a.hasOwnProperty("email")&&!a.email&&t.addClass("error"),a.hasOwnProperty("comment")&&!a.comment&&o.addClass("error"),a.hasOwnProperty("captcha")&&!a.captcha_code&&r.addClass("error")}function t(){"image"===params.captcha_type?o(a(r),a(r).attr("action")):null===c?c=grecaptcha.render(n.attr("id"),{sitekey:n.data("sitekey"),theme:"light"}):grecaptcha.reset(c)}function o(a,e){a.find(".captcha").attr("src",params.captcha_file_url+"?"+Math.random()+"&type="+e).closest(".captcha-container").removeClass("loading")}var r=".boombox-contact-form";if(a(r).length){var c=null,n=a(r).find("#boombox-contact-captcha");"image"===params.captcha_type?o(a(r),a(r).attr("action")):"google"===params.captcha_type&&a("body").on("boombox/grecaptcha_loaded",function(){null===c?c=grecaptcha.render(n.attr("id"),{sitekey:n.data("boombox-sitekey"),theme:"light"}):grecaptcha.reset(c)})}a("body").on("submit",r,function(o){o.preventDefault();var r=a(this),c=r.find("[name=boombox_name]"),n=r.find("[name=boombox_email]"),s=r.find("[name=boombox_comment]"),m=null,i=r.parent().find(".boombox-contact-form-message"),l=r.find("[name=submit]");"image"===params.captcha_type?m=r.find('[name="boombox_captcha_code"]'):"google"===params.captcha_type&&(m=r.find('[name="g-recaptcha-response"]'));var p=m&&m.length?1:0;r.parent().find(".boombox-contact-form-message").html(""),r.find(".error").removeClass("error"),l.attr("disabled","disabled");var d={action:"contact_form_submit",name:c.val(),email:n.val(),comment:s.val(),check_captcha:p};p&&(d.captcha=m.val()),a.post(params.ajax_url,d,function(o){var d=a.parseJSON(o);if(d.valid.length){var h=d.message?d.message:params.error_message;i.html(h),p&&t(),e(d.valid,c,n,s,m)}else d.sent?(i.html(params.success_message),r[0].reset(),p&&t()):i.html(params.wrong_message);l.removeAttr("disabled")})}),a("body").on("click",".boombox-refresh-captcha",function(e){e.preventDefault();var t=a(this).closest("form"),r=t.attr("action");o(t,r)})});